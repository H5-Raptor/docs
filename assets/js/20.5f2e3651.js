(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{643:function(t,s,n){"use strict";n.r(s);var a=n(83),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"utils-与-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#utils-与-plugin"}},[t._v("#")]),t._v(" utils 与 plugin")]),t._v(" "),n("p",[t._v("在前面的章节中提到"),n("code",[t._v("按钮组件")]),t._v("的点击触发调用"),n("code",[t._v("openUrl 插件")]),t._v("的"),n("code",[t._v("openUrl")]),t._v("方法打开页面，\n为什么不在"),n("code",[t._v("按钮组件")]),t._v("中引入业务"),n("code",[t._v("utils")]),t._v("公共方法库中的"),n("code",[t._v("openUrl")]),t._v("方法而要单独提炼出插件？")]),t._v(" "),n("h2",{attrs:{id:"功效不同"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#功效不同"}},[t._v("#")]),t._v(" 功效不同")]),t._v(" "),n("p",[t._v("如果"),n("code",[t._v("按钮组件")]),t._v("中引入了"),n("code",[t._v("openUrl")]),t._v("方法，则约束了组件的按钮点击功能只能是打开页面，而如果按钮点击时仅对外"),n("code",[t._v("emit")]),t._v("一个消息，\n至于最终触发了什么逻辑，完全由用户配置决定，那么按钮点击的功能将是千变万化的。")]),t._v(" "),n("h2",{attrs:{id:"如何选取"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何选取"}},[t._v("#")]),t._v(" 如何选取")]),t._v(" "),n("p",[t._v("设计组件的时候怎么判定是用"),n("code",[t._v("utils")]),t._v("来沉淀还是独立出"),n("code",[t._v("插件")]),t._v("？")]),t._v(" "),n("p",[t._v("如果少了这个方法会导致组件的基本功能无法完成，那么就以"),n("code",[t._v("utils")]),t._v("沉淀，将其打包进组件包体。如果是可动态衔接的功能，就独立出"),n("code",[t._v("插件")]),t._v("，\n可以把"),n("code",[t._v("插件")]),t._v("看作是"),n("strong",[t._v("动态的、可插拔的 utils")]),t._v("。")]),t._v(" "),n("p",[t._v("设计组件的时候切忌把组件的业务粒度做到太大，即便是遇到需求：按钮点击打开页面，我们仍可以拆分出"),n("code",[t._v("按钮")]),t._v("组件和"),n("code",[t._v("openUrl")]),t._v("插件，\n其中"),n("code",[t._v("openUrl")]),t._v("插件示例如下。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// openUrl 插件的基本方法，少了它不行，来源 utils 公共方法库。")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" openUrl "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@utils/open'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 插件对外开放编辑：1，是否立即执行 openUrl。2，页面地址。\n * @param {boolean} props.isImmediate\n * @param {string} props.url\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("myPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" props "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isImmediate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("openUrl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 openUrl 方法供其他组件触发执行")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    openUrl\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmyPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("该插件预设了 2 个可编辑属性，其面板如：")]),t._v(" "),n("img",{staticStyle:{display:"block",margin:"auto"},attrs:{src:"/docs/image/edit-open-url.png",width:"400px"}})])}),[],!1,null,null,null);s.default=e.exports}}]);